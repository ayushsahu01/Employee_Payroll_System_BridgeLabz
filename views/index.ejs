<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Employee Payroll System</title>
    <link rel="stylesheet" href="/style.css" />
</head>

<body>
    <div class="page-wrapper">
        <div class="page-header">
            <h1>Employee Payroll System</h1>
        </div>

        <div class="summary-cards">
            <div class="summary-card card-employees">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="#16a34a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                        <circle cx="9" cy="7" r="4" />
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                        <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                    </svg>
                </div>
                <div class="card-info">
                    <span class="card-label">Total Employees</span>
                    <span class="card-value">
                        <%= employees.length %>
                    </span>
                </div>
            </div>
            <div class="summary-card card-salary">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="#16a34a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="1" x2="12" y2="23" />
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
                    </svg>
                </div>
                <div class="card-info">
                    <span class="card-label">Total Basic Salary</span>
                    <span class="card-value">$<%= totalBasicSalary.toLocaleString() %></span>
                </div>
            </div>
            <div class="summary-card card-tax">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="#16a34a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="7" width="20" height="14" rx="2" ry="2" />
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" />
                    </svg>
                </div>
                <div class="card-info">
                    <span class="card-label">Total Tax (12%)</span>
                    <span class="card-value">$<%= totalTax.toLocaleString() %></span>
                </div>
            </div>
            <div class="summary-card card-net">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="#16a34a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
                        <polyline points="17 6 23 6 23 12" />
                    </svg>
                </div>
                <div class="card-info">
                    <span class="card-label">Total Net Salary</span>
                    <span class="card-value">$<%= totalNetSalary.toLocaleString() %></span>
                </div>
            </div>
        </div>

        <div class="top-bar">
            <h2>Employee Details</h2>
            <div class="top-bar-actions">
                <form action="/" method="GET" class="search-form">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8" />
                        <line x1="21" y1="21" x2="16.65" y2="16.65" />
                    </svg>
                    <input type="text" name="search" placeholder="Search name or department..."
                        value="<%= typeof search !== 'undefined' ? search : '' %>" />
                </form>
                <a href="/employees/create" class="btn-add">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19" />
                        <line x1="5" y1="12" x2="19" y2="12" />
                    </svg>
                    Add Employee
                </a>
            </div>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Position</th>
                        <th>Department</th>
                        <th>Salary</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (employees.length===0) { %>
                        <tr>
                            <td colspan="5">
                                <div class="empty-state">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                                        <circle cx="9" cy="7" r="4" />
                                        <line x1="17" y1="11" x2="23" y2="11" />
                                    </svg>
                                    <p>No employees yet. Add your first employee to get started!</p>
                                </div>
                            </td>
                        </tr>
                        <% } %>
                            <% employees.forEach(employee=> { %>
                                <tr>
                                    <td data-label="Name">
                                        <%= employee.name %>
                                    </td>
                                    <td data-label="Position">
                                        <%= employee.position %>
                                    </td>
                                    <td data-label="Department">
                                        <%= employee.department %>
                                    </td>
                                    <td data-label="Salary" class="salary">$<%= Number(employee.salary).toLocaleString()
                                            %>
                                    </td>
                                    <td data-label="Actions">
                                        <div class="actions">
                                            <a href="/employees/edit/<%= employee.id %>" class="btn btn-edit"
                                                title="Edit">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                    viewBox="0 0 24 24" fill="none" stroke="green" stroke-width="2"
                                                    stroke-linecap="round" stroke-linejoin="round">
                                                    <path
                                                        d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
                                                </svg>
                                            </a>
                                            <form action="/employees/delete/<%= employee.id %>" method="POST"
                                                onsubmit="return confirm('Are you sure you want to delete this employee?');">
                                                <button class="btn btn-delete" type="submit" title="Delete">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                        viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <polyline points="3 6 5 6 21 6" />
                                                        <path
                                                            d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                                                        <line x1="10" y1="11" x2="10" y2="17" />
                                                        <line x1="14" y1="11" x2="14" y2="17" />
                                                    </svg>
                                                </button>
                                            </form>
                                        </div>
                                    </td>
                                </tr>
                                <% }) %>
                </tbody>
            </table>
        </div>
    </div>
</body>

</html>